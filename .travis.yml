language: node_js
node_js:
- '10'
env:
  global:
  - HEROKU_APPNAME=bestbuy-assignment
  - secure: aRdpTCAFJlaT/ayzNhDS9yEBrwFaeZNJA+Nd/JoEisMBFkxFZgsfPdqZZmBlkjnW2WGWbJRqGFCKOehtWsEkq7d7olnwRDCl85wSPU1Hu2KjJTUHTP5Tu0IWZKxUh1v3a3n29GpGzNBK/r4/m4UU3Tfsw2+sd8Dtnat6NF+MVy1OCFAG9AZNIaTAhmxPWVjVUPshQivVRB3DVZLXfZoTuy60nfOErQ4IpIlDPR6Q4XcwSHLX3RP/2AAinJBl42+/qe2J7sKnr8lTNMdRwOHcBiiWjz7sPrqMElfgbBbJigAfPIJmQdtyIzUYuRbwGM7uhk6ISxDHBLFZmr5R/1HJroqXH+Sx5UCl5t5VxIKhEaDdnbtLtcwjzig6GwEIswPIv/B7zUarPD6VfVLIy8cbc4eeJH7Em9qTKVAaxi+By2k8jBqowqAsOnLXZjl26xgERM7dMiSuA6muDalnfLOOq9PyyUksYCKq0oXSvZE8YCAOi9Fxed2x2rVAFalnrxZVoZfD+Qcmm7twWiihOahK12ViwTHGoaYHE9fjmgU2xzp0WtGKv/jkNQQuF7Ripd2zgVoO7j4wK+x6DRYy7iZyTipmSsdA9xNJ1s7W0DD8btWJF2wcdo9cbKrL8YOu0VHEo78V3t8taH+sz0uyIortmrBhOqEPi3c+2WEKIb2pO4o=
  - secure: opvhAdeaYQNhkoP+lt8/VeszEgmYfN2unL4vFMtbhVLsZY+tgoz0+3cR0O4+Za37z6oxDBHGy2Ss4f8Wk0LbnPzRBZhb7XJdF5dJ/TxYMnsxdBD06tG4g8vqTrakdF2/jh+UKr20lpKN32y5rwzeR+Cakv6YN2r2dHmGqM5miaUY7YIfCUh6ZSaqm02jYtGcQClxUJFK9+WHC1dnN/lZ87eWNVKybOc2NpBEehe6ln/SDAuCno+EmGwnlCmtjoFQfppAm/bo/l4X3pPkJv/v9OdRAOcohE6RxmPyiTl6mmiBt2Jy5xyQEmL2GwilVWfTNGDBJEPmMri0rnwKme+6EoxO3oQU4aLEBoVCW6jDvGPnejYK8bic91r/5c4QvWuEwuTiGXizGzzxsS8/51H6ohAfwZpuFuao6gl/0gpq0toLCARZ8Nj/sU/PM8SFkZRrZKtPuz4e6dUbsaTY+dhjwHPVTN90bn+YVWYJ8HJFW7aXRcs3AK1T3c6xnTgWGw0FCDIA0GLV4cZdq4MY/brzM5NbXi8XouXNMuzMb5ixrdOff0xj49y7Uev+0dekWcUs24XK6SUGlzcbSrH3T4szTj2jDlb0z9TvgsflVykb6ivEP5aXxH1eL08U/6XalocovYRHlVIQD2C96f3I0YGl6LFlPzRng1cedCgIqLsNaaA=
  - secure: BRqDs/A+9hEGeZmV57Z7FslT+69fvk0bkAK/Id+2fe3L6jobAMfNtEH3ZH9Jvro8LJp2++MirjmPxstFAp+kSWfNnH6a6/oNq750G+AySWuZjI2uDvpOe8kDF4F4Ls6FuF9bX1lZEr299G1VtRSJFJWD72UkxBXv/0NqrINVHq3v30Fw1P+kdFYRFu0WSvtxctSn/C1fXAUVh+jl97qVGnnrDNMcXqDW4j4cu3LUKS1KJT/l9zBLc78/oD0nUKY9D0z4u5gnyBKaSkN0m3GJ3oPs3NFvlebYBdUda990k95vWMeTx+EnhNLOAZm8lU31+YobeOJHEALuFxw7fFbYD+rTgTXYT4TJenJCz2QFN+m4r0DqUuajf8d38u7T8vSY6vm/ViJyQFIbPBhQ/yDKcBUZjipQni526H/VNC2oy5XP/ZuDs/Tx8/TZwS0HV/xFzrxAZZSPOjvkcxiMP565vSsiVsPHXvFwaDsh6PK41eMbwuSy5ucQu+I6cz1qzzgVufC9nAsaD2jY7QQxDyy1YxcxR2ehxube/dRWGSFkUyXMjT46IPwhDlSfPxTSfX3AjeR6vfzUAsryxYcKdQ822n6CRI2RJBSX26XiRscyGRRXCpplP62AvUTizQNPNfOVb7aHEU3DwBUSpMa+p7AfEE5XMJFpY+5dgBdxFNDKJa0=
  - secure: RceQcWOhG2NSOghg53LmvazpjqaGG/QG5LUnM93/0DGTzlsfTyVqwy6779VXNbSfXTwa7sDMeqJGRBZpk6GNe2ss/1G/SfjzkiXPfRMeD4iMNxa/rw2bXpDQ8fLsqe5bguNvXPjschRBKXSXuIKjc+lm/zizYu3+xWBI2su0dW+HMlSAUCEp+zP9x/52An+tSghROs86WYTOAHSkpWuOWUUDWQr+4faW+lgyy3aNqQrDnti2vbFX/WYtIkwZhmeTFec3sqWor8SlsTt2pyQ6yPE2x1p1wAGUgy9dwrr6pTbk6CKfVVT6bnemr7ZyrmPBhbXwh3d0lekzsZGGmaMCe27stFpDYSy2JIUt8dkIMt6xxDUFIwwjQgZ4/ipEPTstjYz3pSDsmV4+UfmH0fWqZ8y0PGChf8Dyy4Wt8FUdAzSAf9UqBxHWbM/2QgRw6sz38z31K3Ju073x7kRkSbfmtrfBzRk6o9MoADNLc+0lJ8WHCxYt9o/cdbl0WAuyDeo2cZcyC1LDAGY/b+JEQSgI+0rzXy+i0oOx0ZlaERG9ueFP1V6lY1ZHSZqgLnzJznacJuoBFtTMQUe+f6MJYllwR/+UIVxGHZ/xFjCm/cZl8AfJtih5cvnvfYPcyJIb/qklwsscQFVHHNot2FwSotb34ZVAq7y5VF3NWdRvpx+Fnl0=
  - secure: OL9Ko7FIKvyilC2uDel5t3qlylBY6QEMkXiXctWOD9WISLyWYlT//SyHPiISMMtc6eiMAxaUj7XrfMcIM9/ButKxVaUzRw3cR3S527V3fEGYeNdEncMT5Z1zclHBPNMa/+1ZPQGxHPU0aex26StH3xnfoB7Y8ycGXoUs0XZuMaWFgQVN7P7+1t1HqDl91rvCav0c+l4H1gSFt337Yhbr9+8E1hDzXFIpQxnDa2fnZU7c7JPeooIdduOc4Q+knqrf9bRAPZWMIFdRC+3+tIwBvW/a/KKqrtkZx3vvQRvubMhvrIOSNfz9s/b6dgoDPdaYDl51bP9TO4WHrDvzKBJhR1n8Aq+/ZlWrWWZR+q7ABg8KMY1DGW+y8hElJ+Qhb4u53Ai83czxCFZANUQSAgks0zg6D7n2lSwP4vcK8ozC5CeXLJA0pOG4/kEDWuXtCWMlYM0R/LQrYCxuPTP5A+5Pyhunva3yDz9bU2QBVZMFMUVwqhUPAw9OVCPL4hZaxdujUmzbS0Bwl48hPRxrvZrcLp7+YPBmFV6/+tvGskCNNduxmDEReEePsKFIodQkr6V5KMVQTYEUVNLnToR/PXhFRI9nm+g/U0mVybsCe/Cyi66gKfVms4xrbo9QWAmA/rthrhtMpxPP8RifeunInLNoX929fc/l5SpgAQNBI68r2dI=
services:
- docker
before_install:
- echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
- echo "$HEROKU_PASSWORD" | docker login -u "$HEROKU_USERNAME" --password-stdin registry.heroku.com
script:
- docker build -t $DOCKER_USERNAME/bestbuy .
- docker tag $DOCKER_USERNAME/bestbuy registry.heroku.com/$HEROKU_APPNAME/web
deploy:
  provider: script
  script:
    docker push $DOCKER_USERNAME/bestbuy;
    docker push registry.heroku.com/$HEROKU_APPNAME/web;
    heroku container:release -v web --app $HEROKU_APPNAME;
  branch: master
